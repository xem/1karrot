<body id=b>
<script>

// =====================
//  Can I Has 1Karrot ?
// =====================

// The magician's rabbit has escaped the stage and looks for his carrot in a strange jungle maze...
// Controls: Arrow keys or WASD or ZQSD.
// JS1k demo by Maxime EUZIERE (xem.github.io), rendered only with CSS3D and emoji characters.
// Optimized for running on latest Windows 10 / Mac OS, on Firefox, Chrome and Safari browsers.
// Linux users will see monochrome emoji or nothing. It's recommended to install the Emoji One font:
// Download https://goo.gl/J7GbE6 => right-click on the file => install as system font.
// The demo abuses HTML & CSS hacks to save space, and abuses repetitions to optimize for RegPack.
// Minified code is 1758 bytes long, RegPack'd code is 1024 bytes long.
// This demo generates about 20kb of HTML code.

// Initializations
// ---------------

// Frame counter
t =

// Carrot found
c =

// Tree counter
q =

// Up / down / left / right keys pressed
u = d = l = r = 0;

// Game loop
// ---------

// The content of this function is passed to RegPack.
// (Settings: do not rename var "b", score: 1/1/0)
// The result (998 bytes long) is then placed in the following snippet without the final eval statement:
// t=H=u=d=l=r=0;(PACKED CODE);setInterval(_,33)
// Which makes a total of 1024b.
// Note: the variable 'q' is renamed to 'H' by RegPack.
setInterval(function(e){

// If the game has started (t > 0):
// (t=0 on load, so this part of the code is ignored. Then at each frame, t>0 and this part is executed).
t
?(
  
  // Increment c if the bunny's X position is over 45in.
  // (the tile containing the carrot is the only walkable tile on the 15th column, so walking on it is the winning criteria).
  x > 45
  
  // If the carrot is found (c != 0):
  ? (
  
    // Reset the rabbit's angle to 0.
    a = 0,
    
    // Give the scene a CSS transition duration of 5 seconds.
    s.style.transition = `5s`,
    
    // Then give the scene a different angle and position to see it dezoomed and from above.
    // (The last closing parenthesis of a CSS rule can be omitted)
    s.style.transform = `rotateX(25deg)translate3D(-23in,-23in,-23in`
  )
  
  //
  : s.style.transform = `rotateX(.8rad)rotateZ(${a}rad)translate(${-x}in,${-y}in`,
  
  //
  v = x,
  
  //
  w = y,
  
  //
  x += (d - u) / 9 * Math.sin(
  
    //
    a += (l - r) / 30
  ),
  
  //
  y += (d - u) / 9 * Math.cos(a),
  
  //
  x > 0 && y > 0 && this[`g${~~(y / 3)}` + ~~(x / 3)] || (x = v, y = w),
  
  //
  h.style.transform = `translate3D(${x}in,${y}in,${3 - Math.sin(t / 5)}em)rotateZ(${-a}rad)rotateX(5rad`
)
:(
  
  //
  b.innerHTML = 
  `<div style=height:95vh;perspective:7in;overflow:hidden;background:#6e0>
    <div style=transform-style:preserve-3d;margin:3in+50%;transform-origin:0+0 id=s>
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t515>🥕
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t010>🐒
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t40>🐍
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t114>🐌
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t59>🦍
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t24>🐆
      <a style=position:fixed;font:2em'';padding:2em+0+0 id=t38>🐢
      <a><div style=position:fixed;width:.${navigator.platform[5]?6:7}in;font:3em'' id=h>🐰
        <div style=font:60px/.${navigator.platform[5]?1:5}in'';transform:scale(-1)translateY(9px>🎩`,
  
  //
  onkeydown= e => this['lurdl*d*l*ur*u'[(e.which + 3) % 20]] = 1,
  
  //
  onkeyup = e => this['lurdl*d*l*ur*u'[(e.which + 3) % 20]] = 0,
  
  //
  x = y =
  
  //
  a = 5
);

//
for(i in m = [5120,22511,29732,13540,29829,57087])
  
  //
  for(j = 16; j--;)
    
    //
    t
    ?(
      
      //
      this[`t${i + j}`] && (
        
        //
        x > 45 && (
          
          //
          this[`t${i + j}`].style.transition = `5s`
        ),
        
        //
        this[`t${i + j}`].style.transform = `translate3D(${j*3+2}in,${i*3+1.5}in,${navigator.platform[5]?1.5:2}in)rotateZ(${-a}rad)rotateX(5rad)scale(3`
      )
    )
    
    //
    :(
      
      //
      s.innerHTML +=
      
      //
      m[i] >> j & 1
      
      //
      ? `<div style=position:fixed;padding:1.6in;background:#961;transform:translate(${j * 3 + .6}in,${i * 3 + .6}in id=g${i + j}>`
      
      //
      :
        q++ % 8
      
        //
        ? `<div style=position:fixed;font:1in'' id=t${i + j}>`
          
          //
          + [...`🌳🌲🌵🌴`][q % 4]
      
        //
        : ``
    );

//
t++

},33)
</script>